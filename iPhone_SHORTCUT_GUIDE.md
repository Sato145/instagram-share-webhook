# iPhoneショートカット設定ガイド（統合版）

## 📱 重要な変更点

Instagram と TikTok の両方に対応した統合ショートカットです。URLから自動的にプラットフォームを検出します。

## 🎯 対応プラットフォーム

- ✅ Instagram (投稿/リール/ストーリー)
- ✅ TikTok (動画)

---

## 🎯 新しい設定方法

### ステップ1: ショートカットアプリを開く

1. iPhoneのホーム画面から「ショートカット」アプリを開く
2. 画面右上の「+」ボタンをタップ

### ステップ2: 基本設定

1. ショートカット名を設定:
   ```
   SNS共有
   ```

2. 画面上部の「⋯」（詳細）をタップ

3. 「共有シートに表示」をONにする

4. 「共有シートのタイプ」で以下を選択:
   - ✅ **URL**
   - ✅ **テキスト**

5. 「完了」をタップ

### ステップ3: アクション追加

#### 3-1. テキストを入力アクション（ユーザー名）

1. 「アクションを追加」をタップ
2. 検索バーに「テキストを入力」と入力
3. 「テキストを入力」アクションを追加
4. プロンプトに以下を入力:
   ```
   投稿者のユーザー名を入力してください（@なし）
   ```
5. デフォルト値は空欄のまま

#### 3-2. テキストを入力アクション（投稿本文）

1. 「+」ボタンをタップ
2. 検索バーに「テキストを入力」と入力
3. 「テキストを入力」アクションを追加
4. プロンプトに以下を入力:
   ```
   投稿本文を入力してください（任意）
   ```
5. デフォルト値は空欄のまま

#### 3-3. 辞書アクションを追加

1. 「+」ボタンをタップ
2. 検索バーに「辞書」と入力
3. 「辞書」アクションを追加

4. 辞書に以下の3つのキーを設定:

   **キー1**: `url`
   - 値: 「ショートカット入力」を選択

   **キー2**: `username`
   - 値: 「指定入力」を選択（最初のテキスト入力）

   **キー3**: `caption`
   - 値: 「指定入力」を選択（2番目のテキスト入力）

5. 完成イメージ:
   ```
   ┌─────────────────────────┐
   │ 辞書                    │
   ├─────────────────────────┤
   │ url: ショートカット入力  │
   │ username: 指定入力       │
   │ caption: 指定入力        │
   └─────────────────────────┘
   ```

   **注意**: このショートカット1つでInstagramとTikTok両方に対応します。サーバー側でURLから自動判定されます。

#### 3-4. URLの内容を取得アクションを追加

1. 「+」ボタンをタップ
2. 「URLの内容を取得」を追加
3. URL: `https://instagram-share-webhook.onrender.com/webhook`
4. メソッド: **POST**
5. 本文を要求: **JSON**
6. JSON: 「辞書」を選択

#### 3-5. 通知を表示アクションを追加

1. 「+」ボタンをタップ
2. 「通知を表示」を追加
3. テキスト: `SNS投稿を共有しました`

### ステップ4: 完成

完成したショートカットは以下のようになります:

```
1. テキストを入力
   プロンプト: 投稿者のユーザー名を入力してください（@なし）

2. テキストを入力
   プロンプト: 投稿本文を入力してください（任意）

3. 辞書
   url: ショートカット入力
   username: 指定入力（1番目）
   caption: 指定入力（2番目）

4. URLの内容を取得
   URL: https://instagram-share-webhook.onrender.com/webhook
   メソッド: POST
   本文を要求: JSON
   辞書

5. 通知を表示
   SNS投稿を共有しました
```

**このショートカット1つでInstagram/TikTok両方に対応します！**

---

## 📱 使用方法

### Instagram投稿を共有

1. Instagramアプリで投稿を開く
2. 共有ボタンをタップ
3. 「SNS共有」を選択
4. **ユーザー名を入力**（例: `nike`, `cocacola`）
   - @マークは不要
5. 「完了」をタップ
6. **投稿本文を入力**（コピー＆ペースト推奨）
   - 空欄でもOK（自動取得を試みます）
7. 「完了」をタップ
8. Pushover通知を待つ

### TikTok動画を共有

1. TikTokアプリで動画を開く
2. 共有ボタンをタップ
3. 「SNS共有」を選択
4. **ユーザー名を入力**（例: `charlidamelio`）
   - @マークは不要
5. 「完了」をタップ
6. **動画の説明文を入力**（コピー＆ペースト推奨）
   - 空欄でもOK（自動取得を試みます）
7. 「完了」をタップ
8. Pushover通知を待つ

---

## 💡 投稿本文の取得方法

### 方法1: Instagram投稿画面からコピー

1. Instagram投稿を開く
2. 投稿本文を長押し
3. 「コピー」をタップ
4. ショートカットの入力画面で長押し → 「ペースト」

### 方法2: 空欄のまま送信

- 投稿本文を空欄のまま「完了」を押すと、サーバー側で自動取得を試みます
- ただし、Instagramの制限により取得できない場合があります

### 方法3: 要約して入力

- 長い本文の場合、重要な部分だけを入力してもOK

---

## 🔧 トラブルシューティング

### 問題: 入力が2回出てくるのが面倒

**解決策1**: よく共有するアカウントの場合、ユーザー名を固定値にする
- 「テキストを入力」の代わりに「テキスト」アクションを使用
- 固定のユーザー名を入力

**解決策2**: 投稿本文の入力をスキップ
- 空欄のまま「完了」を押す
- サーバー側で自動取得を試みます

**解決策3**: ショートカットを複数作成
- よく共有するアカウント用（ユーザー名固定）
- その他のアカウント用（ユーザー名入力）

---

## 📞 サポート

この方法で投稿本文が正しく表示されるようになります。

---

**更新日**: 2026年2月21日  
**バージョン**: 3.0  
**対応iOS**: iOS 14以降
