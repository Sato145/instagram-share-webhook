# iPhoneショートカット設定ガイド（改訂版）

## 📱 重要な変更点

Instagram投稿の情報を正確に取得するため、ショートカットの設定を改善しました。

---

## 🎯 新しい設定方法

### ステップ1: ショートカットアプリを開く

1. iPhoneのホーム画面から「ショートカット」アプリを開く
2. 画面右上の「+」ボタンをタップ

### ステップ2: 基本設定

1. ショートカット名を設定:
   ```
   Instagram共有
   ```

2. 画面上部の「⋯」（詳細）をタップ

3. 「共有シートに表示」をONにする

4. 「共有シートのタイプ」で以下を選択:
   - ✅ **URL**
   - ✅ **テキスト**（新規追加）

5. 「完了」をタップ

### ステップ3: アクション追加

#### 3-1. テキストを入力アクションを追加

1. 「アクションを追加」をタップ
2. 検索バーに「テキストを入力」と入力
3. 「テキストを入力」アクションを追加
4. プロンプトに以下を入力:
   ```
   投稿者のユーザー名を入力してください（@なし）
   ```
5. デフォルト値は空欄のまま

#### 3-2. 辞書アクションを追加

1. 「+」ボタンをタップ
2. 検索バーに「辞書」と入力
3. 「辞書」アクションを追加

4. 辞書に以下の2つのキーを設定:

   **キー1**: `url`
   - 値: 「ショートカット入力」を選択

   **キー2**: `username`
   - 値: 「指定入力」を選択（ステップ3-1で作成したもの）

5. 完成イメージ:
   ```
   ┌─────────────────────────┐
   │ 辞書                    │
   ├─────────────────────────┤
   │ url: ショートカット入力  │
   │ username: 指定入力       │
   └─────────────────────────┘
   ```

#### 3-3. URLの内容を取得アクションを追加

1. 「+」ボタンをタップ
2. 「URLの内容を取得」を追加
3. URL: `https://instagram-share-webhook.onrender.com/webhook`
4. メソッド: **POST**
5. 本文を要求: **JSON**
6. JSON: 「辞書」を選択

#### 3-4. 通知を表示アクションを追加

1. 「+」ボタンをタップ
2. 「通知を表示」を追加
3. テキスト: `Instagram投稿を共有しました`

### ステップ4: 完成

完成したショートカットは以下のようになります:

```
1. テキストを入力
   プロンプト: 投稿者のユーザー名を入力してください（@なし）

2. 辞書
   url: ショートカット入力
   username: 指定入力

3. URLの内容を取得
   URL: https://instagram-share-webhook.onrender.com/webhook
   メソッド: POST
   本文を要求: JSON
   辞書

4. 通知を表示
   Instagram投稿を共有しました
```

---

## 📱 使用方法

1. Instagramアプリで投稿を開く
2. 共有ボタンをタップ
3. 「Instagram共有」を選択
4. **ユーザー名を入力**（例: `nike`, `cocacola`）
   - @マークは不要
   - 投稿のURLやプロフィールから確認
5. 「完了」をタップ
6. Pushover通知を待つ

---

## 💡 ユーザー名の確認方法

### 方法1: 投稿画面から
- 投稿の上部に表示されているアカウント名をタップ
- プロフィール画面のURLを確認: `instagram.com/username`

### 方法2: URLから
- 共有URLが `instagram.com/username/p/CODE/` の形式の場合
- `username` の部分がユーザー名

### 方法3: プロフィールから
- 投稿者のプロフィールを開く
- 画面上部のユーザー名を確認

---

## 🔧 トラブルシューティング

### 問題: ユーザー名入力が面倒

**解決策1**: よく共有するアカウントのユーザー名をメモ帳に保存

**解決策2**: ユーザー名を空欄のまま「完了」
- サーバー側で「Instagram」として処理されます

---

## 📞 サポート

この方法でもユーザー名が正しく表示されない場合は、サーバーログを確認してください。

---

**更新日**: 2026年2月21日  
**バージョン**: 2.0  
**対応iOS**: iOS 14以降
